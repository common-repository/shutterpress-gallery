(()=>{"use strict";var e={n:l=>{var t=l&&l.__esModule?()=>l.default:()=>l;return e.d(t,{a:t}),t},d:(l,t)=>{for(var a in t)e.o(t,a)&&!e.o(l,a)&&Object.defineProperty(l,a,{enumerable:!0,get:t[a]})},o:(e,l)=>Object.prototype.hasOwnProperty.call(e,l)};const l=window.wp.blocks,t=window.wp.element,a=window.wp.components,o=window.wp.i18n,s=window.wp.blockEditor,n=window.wp.apiFetch;var r=e.n(n);const u=JSON.parse('{"UU":"shutterpress-gallery/shutterpress-gallery-block"}'),p=window.ReactJSXRuntime;(0,l.registerBlockType)(u.UU,{attributes:{galleryId:{type:"number",default:0},useLightbox:{type:"boolean",default:!0},showDefaultButtons:{type:"boolean",default:!0},galleryLayout:{type:"string",default:"masonry"},galleryGap:{type:"number",default:20},columns_desktop:{type:"number",default:3},columns_tablet:{type:"number",default:2},columns_mobile:{type:"number",default:1},defaults_set:{type:"boolean",default:!1}},edit:function(e){const{attributes:l,setAttributes:n}=e,{galleryId:u,useLightbox:b,showDefaultButtons:i,galleryLayout:c,galleryGap:d,columns_desktop:_,columns_tablet:g,columns_mobile:y,defaults_set:h}=l,[m,v]=(0,t.useState)([]),[f,w]=(0,t.useState)(!0),[x,C]=(0,t.useState)(null),j=(0,s.useBlockProps)();(0,t.useEffect)((()=>{w(!0),r()({path:"wp/v2/shutterpress-gallery"}).then((e=>{v(e),w(!1),0===u&&e.length>0&&n({galleryId:e[0].id})})).catch((e=>{C(e.message),v([]),w(!1)})),!1===h&&r()({path:"shutterpress/v1/options"}).then((e=>{n({useLightbox:e.sp_gallery_use_lightbox}),n({galleryLayout:e.sp_gallery_layout}),n({galleryGap:parseInt(e.sp_gallery_column_gap,10)}),n({columns_desktop:parseInt(e.sp_gallery_columns_desktop,10)}),n({columns_tablet:parseInt(e.sp_gallery_columns_tablet,10)}),n({columns_mobile:parseInt(e.sp_gallery_columns_mobile,10)}),n({defaults_set:!0})})).catch((e=>{console.error("Error fetching options:",e)}))}),[h]);const I=!f&&m.length>0?m.map((e=>({label:e.title.rendered||"Untitled Gallery",value:e.id}))):[{label:f?"Loading galleries...":"No galleries found",value:""}];return(0,p.jsxs)("div",{...j,children:[f&&(0,p.jsx)(a.Spinner,{}),(0,p.jsx)(a.SelectControl,{label:(0,o.__)("Select Gallery"),value:u,options:I,onChange:e=>n({galleryId:parseInt(e,10)}),disabled:f||x}),x&&(0,p.jsxs)("p",{style:{color:"red"},children:[(0,o.__)("Error: ","shutterpress-gallery"),x]}),(0,p.jsx)(s.InspectorControls,{children:(0,p.jsxs)(a.PanelBody,{title:(0,o.__)("Gallery Settings"),initialOpen:!0,children:[(0,p.jsx)(a.ToggleControl,{label:(0,o.__)("Use Lightbox"),checked:b,onChange:e=>n({useLightbox:!!e})}),(0,p.jsx)(a.ToggleControl,{label:(0,o.__)("Use Default Buttons"),checked:i,onChange:e=>n({showDefaultButtons:!!e})}),(0,p.jsxs)("p",{className:"components-base-control__help",children:[(0,o.__)(`If you want to add custom buttons, create a button and set the button HTML ANCHOR to "sp-gallery-filter-liked-photos-${u}". See `,"shutterpress-gallery"),(0,p.jsx)("a",{href:"https://shutterpress.io",target:"_blank",rel:"noopener noreferrer",children:"Shutterpress.io"})," for more info."]}),(0,p.jsx)(a.SelectControl,{label:(0,o.__)("Layout"),value:c,options:[{label:"Masonry",value:"masonry"},{label:"Grid",value:"grid"}],onChange:e=>n({galleryLayout:e})}),(0,p.jsx)(a.RangeControl,{label:(0,o.__)("Image Gap"),value:d,onChange:e=>n({galleryGap:parseInt(e,10)}),min:0,max:100}),(0,p.jsx)(a.SelectControl,{label:(0,o.__)("Number of Desktop Columns"),value:_,options:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9},{label:"10",value:10}],onChange:e=>n({columns_desktop:parseInt(e,10)})}),(0,p.jsx)(a.SelectControl,{label:(0,o.__)("Number of Tablet Columns"),value:g,options:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8}],onChange:e=>n({columns_tablet:parseInt(e,10)})}),(0,p.jsx)(a.SelectControl,{label:(0,o.__)("Number of Mobile Columns"),value:y,options:[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4}],onChange:e=>n({columns_mobile:parseInt(e,10)})})]})})]})},save:function(){return null}})})();